<?xml version="1.0" encoding="UTF-8"?>
<database>
    <element extends="x_16717_homechart_encounter" label="Infant Feeding" max_length="40" name="x_16717_homechart_infant_feeding" type="collection">
        <element calculation="(function calculatedFieldValue(current) {&#13;&#10;&#13;&#10;&#9;var bm = current.volume_breastmilk / 30; // ml to oz&#13;&#10;&#9;var pbm = current.volume_pumped_breastmilk / 30; // ml to oz&#13;&#10;&#9;var f = current.volume_formula / 30; // ml to oz&#13;&#10;&#9;var bmCal = parseInt( gs.getProperty( 'x_16717_homechart.CaloriesPerOunceBreastMilk' ) );&#13;&#10;&#9;var fCal = current.formula_mixed_to_kcal_oz;&#13;&#10;&#9;var pbmCal = current.pumped_breastmilk_fortified_to_kcal_oz;&#13;&#10;&#9;&#13;&#10;&#9;var totalCal = 0;&#13;&#10;&#9;totalCal += ( bm * bmCal );&#13;&#10;&#9;totalCal += ( pbm * ( bmCal + pbmCal ) );&#13;&#10;&#9;totalCal += ( f * fCal );&#13;&#10;&#9;&#13;&#10;&#9;return totalCal;&#13;&#10;&#13;&#10;})(current);" label="Calories" max_length="40" name="calories" read_only="true" type="integer" virtual="true"/>
        <element default="javascript:var gr = new GlideRecord( 'x_16717_homechart_infant_feeding' );&#13;&#10;gr.orderByDesc( 'date_time' );&#13;&#10;gr.query();&#13;&#10;gr.next();&#13;&#10;answer = gr.formula_mixed_to_kcal_oz;" label="Formula mixed to (kcal/oz)" max_length="40" name="formula_mixed_to_kcal_oz" type="integer"/>
        <element default="0" label="Minutes at breast" max_length="40" name="minutes_at_breast" type="integer"/>
        <element default="javascript:global.getNextObjNumberPadded();" display="true" label="Number" max_length="40" name="number" read_only="true" type="string"/>
        <element default="javascript:var gr = new GlideRecord( 'x_16717_homechart_infant_feeding' );&#13;&#10;gr.orderByDesc( 'date_time' );&#13;&#10;gr.query();&#13;&#10;gr.next();&#13;&#10;answer = gr.pumped_breastmilk_fortified_to_kcal_oz;" label="Pumped breastmilk fortified to (+ kcal/oz)" max_length="40" name="pumped_breastmilk_fortified_to_kcal_oz" type="integer"/>
        <element calculation="(function calculatedFieldValue(current) {&#13;&#10;&#13;&#10;&#9;return current.volume_breastmilk + current.volume_pumped_breastmilk + current.volume_formula;&#13;&#10;&#13;&#10;})(current);" default="0" label="Total volume (mL)" max_length="40" name="total_volume" read_only="true" type="decimal" virtual="true"/>
        <element calculation="(function calculatedFieldValue(current) {&#13;&#10;&#13;&#10;&#9;if ( ! current.weight_before )&#13;&#10;&#9;&#9;return 0;&#13;&#10;&#9;&#13;&#10;&#9;if ( ! current.weight_after )&#13;&#10;&#9;&#9;return 0;&#13;&#10;&#9;&#13;&#10;&#9;return current.weight_after - current.weight_before;&#13;&#10;&#13;&#10;})(current);" default="0" label="Volume breastmilk (mL)" max_length="40" name="volume_breastmilk" read_only="true" type="decimal" virtual="true"/>
        <element default="0" label="Volume formula (mL)" max_length="40" name="volume_formula" type="decimal"/>
        <element default="0" label="Volume pumped breastmilk (mL)" max_length="40" name="volume_pumped_breastmilk" type="decimal"/>
        <element default="0" label="Weight after (g)" max_length="40" name="weight_after" type="decimal"/>
        <element default="0" label="Weight before (g)" max_length="40" name="weight_before" type="decimal"/>
    </element>
</database>
